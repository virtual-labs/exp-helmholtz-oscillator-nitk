<!DOCTYPE html>
<html lang="en-US">
<head>
  <title>SOLVE</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<style>
button:hover {
cursor:pointer;
}
th,td{
border:2px solid black;
padding: 8px;
text-align:center;
}
li{
font-size:16px;
}
</style>
</head>
<body style='border:1px;border-style:solid;width:800px;height:600px;position:relative;bottom:7px;right:7px;font-family:Arial, sans-serif; '>
<div>
<h1 style='background-color:black;color:white;text-align:center;padding:11px;position:relative;bottom:18px;font-size:25px'>Helmholtz Resonator</h1>
</div>
<div style='position:relative;bottom:35px;height:550px;width:200px;background-color:#b5e1f3;'>
<div style='font-size:17px;position:relative;left:10px;top:10px;'>
<label for='slider'>Frequency of tuning<br>fork:<span id='fill1'>130</span>Hz</label><br>
<input id='slider' type='range' min='130' max='250' step='15' value='130' onInput='getValue()'>
<button style='position:relative;left:24px;top:10px;padding:7px 15px;border:2px;border-style:solid;border-radius:30px;' onClick='Fill()'>Fill Resonator</button><br><br>
<button id='strt' style='position:relative;left:26px;padding:7px 41px;border:2px;border-style:solid;border-radius:30px;' onClick='startAnimation()' disabled>Start</button><br><br>
<button id='att' style='position:relative;left:26px;padding:7px 17px;border:2px;border-style:solid;border-radius:30px;' onClick='addtable()' disabled>Add To Table</button><br><br>
<button id='obsvtns' style='position:relative;left:26px;bottom:10px;padding:7px 16px;border:2px;border-style:solid;border-radius:30px;' onClick='obs()' disabled>Observations</button><br>
<button style='position:relative;left:26px;top:210px;padding:7px 41px;border:2px;border-style:solid;border-radius:30px;' onClick='reset()'>Reset</button><br><br><br><br><br><br><br><br><br><br><br><br>
<img src="images/help.png" onClick='help()' style='width:25px;height:25px;' alt="">
</div>
</div>
<div style='position:relative;bottom:600px;left:200px;'>
<img id="resonatorImage" src="images/img1.jpg" style='position:relative;left:50px;top:15px;width:550px;height:550px;' alt="">
<a href='index.html'><img src="images/arrow rev.png" style='position:relative;right:535px;top:10px;' alt=""></a>
<p id="add" style="display: none;position:relative;bottom:550px;left:450px;">Added Successfully!</p>
</div>
<div id='blocker' style='display:none;position:relative;bottom:1139px;height:551px;width: 800px;background-color:rgba(0, 0, 0, 0.5);'>
</div>
<div id='instructions' style='display:none;height:400px;width:700px;position: relative;background-color:white;left:45px;bottom:1625px;border:black solid;border-width:3px;line-height:1.63rem;'>
<h4 style='position:relative;bottom:20px;left:42px;'>Instructions</h4>
<ol style='position:relative;bottom:40px;'>
<li>Select "Frequency of tuning fork" using "Frequency of tuning
fork" slider.</li>
<li>Click the "Fill Resonator" button to fill the resonator with water.</li>
<li>Click the "Start" button to start the experiment by activating the tuning fork with rubber pads and letting water flow.</li>
<li>Click on the "Add to Table" button to add the frequency and volume of air column values to the table.</li>
<li>Click on the "Observation" button to view the table.</li>
<li>Click on the "Plot Graph" button to plot the graph.</li>
<li>Click on the "V/n^-2 GRAPH" button to view the garph</li>
<button style='position:relative;padding:7px 12px;top:97px;left:595px;border:2px;border-style:solid;border-radius:30px;' onClick='closeins()'>Close</button>
</div>
<div id='observation' style='display:none;height:400px;width:700px;position: relative;left:45px;bottom:1625px;background-color:rgb(174, 215, 232);border:black solid;border-width:3px;'>
<table id='obstable' style='width:95%;border-collapse:collapse;margin-top:20px;margin-bottom:5px;height:min-content;background-color:white;position:relative;left:18px;'>
<tr>
<th>Frequency (HZ)</th>
<th>Volume Of Air Column (CC)</th>
</tr>
</table>
<button style='position:absolute;padding:6px 12px;border:2px;border-style:solid;border-radius:30px;top:365px;left:5px;' onClick='closeobs()'>Close</button>
<button id='clear' style='position:absolute;padding:6px 12px;border:2px;border-style:solid;border-radius:30px;top:365px;left:290px;' onClick='clearing()'>Clear All</button>
<button id="graphButton" style='position:absolute;padding:6px 12px;border:2px;border-style:solid;border-radius:30px;top:365px;left:580px;'onClick='generateGraph()'>Plot Graph</button>
<button id="graphplotted" style='position:absolute;padding:6px 12px;border:2px;border-style:solid;border-radius:30px;top:365px;left:580px;display:none' onClick='plotted()'>V/n^-2 GRAPH</button>
</div>
<div id='grph' style='display:none;height:400px;width:700px;position: relative;left:45px;bottom:1625px;background-color:rgb(255, 255, 255);border:black solid;border-width:3px;'>
<canvas id="myChart" style="display: none"></canvas>
<button style='position:absolute;padding:6px 12px;border:2px;border-style:solid;border-radius:30px;top:365px;left:5px;' onClick='closegrph()'>Close</button>
</div>
<script>
let num=1;
function getValue(){
   var inp;
   inp=document.getElementById('slider');
   document.getElementById('fill1').innerHTML=inp.value;
}
function Fill(){
	var pic;
	pic="images/img2.jpg"
	document.getElementById('resonatorImage').src=pic;
	document.getElementById('strt').disabled=false;
	document.getElementById('att').disabled=false;
	document.getElementById('obsvtns').disabled=false;
	document.getElementById('shwrslt').disabled=false;
}
function help() {
    document.getElementById('instructions').style.display = 'block';
    document.getElementById('blocker').style.display = 'block';
}
function closeins() {
    document.getElementById('instructions').style.display = 'none';
    document.getElementById('blocker').style.display = 'none';
}
function obs() {
    document.getElementById('observation').style.display = 'block';
    document.getElementById('blocker').style.display = 'block';
}
function closeobs() {
    document.getElementById('observation').style.display = 'none';
    document.getElementById('blocker').style.display = 'none';
}
function closegrph() {
    document.getElementById('grph').style.display = 'none';
    document.getElementById('observation').style.display = 'block';
    document.getElementById('graphButton').style.display = 'none';
    document.getElementById('graphplotted').style.display = 'block';
}
var counter = 0;
var images = ["images/imgA.jpg", "images/imgB 1.jpg", "images/imgB 2.jpg", "images/imgB 3.jpg", "images/imgB 4.jpg", "images/imgC 1.jpg", "images/imgC 2.jpg", "images/imgC 3.jpg", "images/imgC 4.jpg", "images/imgD 1.jpg", "images/imgD 2.jpg", "images/imgD 3.jpg", "images/imgD 4.jpg", "images/imgE 1.jpg", "images/imgE 2.jpg", "images/imgE 3.jpg", "images/imgF.jpg"];


function startAnimation() {
   var image = document.getElementById("resonatorImage");
   image.src = images[counter];
   if (counter === 16) {
   clearTimeout(timeoutId);
   return;
}
   counter = (counter + 1) % 17;
   setTimeout(startAnimation, 700);
   document.getElementById('att').disabled=false;
   document.getElementById('obsvtns').disabled=false;
   document.getElementById('shwrslt').disabled=false;
}
function addtable(){
   var table=document.getElementById('obstable');
   var row=table.insertRow(num);
   var freq=row.insertCell(0);
   var vol=row.insertCell(1);
   var frqinp=document.getElementById('slider').value
   freq.innerHTML=frqinp;
   vol.innerHTML=(16550815.348/(frqinp*frqinp)).toFixed(2);
   num=num+1;
   document.getElementById('add').style.display = 'block';
   setTimeout(timer, 2000);
}
function timer() {
    document.getElementById('add').style.display = 'none';
}
function clearing(){
   var num1=num
   for(let j=1;j<num1;){
      document.getElementById("obstable").deleteRow(j);
      num=num-1;
   }
}
function reset(){
   location.reload();
}

// Get references to the button and the canvas element
const graphBtn = document.getElementById('graphButton');
const canvas = document.getElementById('myChart');

// Define a function to generate the graph
function generateGraph() {
  // Get the data from the table
  const table = document.getElementById('obstable');
  const freqs = [];
  const vols = [];
  for (let i = 1; i < table.rows.length; i++) {
    freqs.push(parseFloat(table.rows[i].cells[0].innerText));
    vols.push(parseFloat(table.rows[i].cells[1].innerText));
  }

  // Create the chart using Chart.js
  const ctx = canvas.getContext('2d');
  new Chart(ctx, {
    type: 'scatter',
    data: {
      datasets: [{
        label: 'Volume of Air Column vs 1/Frequency^2',
        data: vols.map((vol, i) => ({ x: 1/(freqs[i]*freqs[i]), y: vol })),
        pointRadius: 5,
        pointHoverRadius: 7,
        pointBackgroundColor: 'blue'
      }]
    },
    options: {
      scales: {
        xAxes: [{
          type: 'linear',
          position: 'bottom',
          scaleLabel: {
            display: true,
            labelString: '1/Frequency^2'
          }
        }],
        yAxes: [{
          type: 'linear',
          scaleLabel: {
            display: true,
            labelString: 'Volume of Air Column (cc)'
          }
        }]
      }
    }
  });
  // Show the canvas element and hide the button
  canvas.style.display='block';
  document.getElementById('observation').style.display = 'none';
  document.getElementById('grph').style.display = 'block';
  document.getElementById('clear').style.display = 'none';
  document.getElementById('att').disabled =true;
}
function plotted(){
   document.getElementById('grph').style.display = 'block';
   document.getElementById('observation').style.display = 'none';
   
}
</script>
</body>
</html>